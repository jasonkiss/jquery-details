/*! http://mths.be/details v0.1.0 by @mathias | includes http://mths.be/noselect v1.0.3 */
/* forked 20-11-2014 by @jasonkiss and updated with support for role=group and @aria-controls */
(function(e,t){var n=t.fn,r,s=Object.prototype.toString.call(window.opera)=="[object Opera]",o=function(e){var t=e.createElement("details"),n,r,i;if(!("open"in t)){return false}r=e.body||function(){var t=e.documentElement;n=true;return t.insertBefore(e.createElement("body"),t.firstElementChild||t.firstChild)}();t.innerHTML="<summary>a</summary>b";t.style.display="block";r.appendChild(t);i=t.offsetHeight;t.open=true;i=i!=t.offsetHeight;r.removeChild(t);if(n){r.parentNode.removeChild(r)}return i}(e),u=function(e,t,n,r){var i=e.prop("open"),s=i&&r||!i&&!r;if(s){e.removeClass("open").prop("open",false).triggerHandler("close.details");t.attr("aria-expanded",false);n.hide()}else{e.addClass("open").prop("open",true).triggerHandler("open.details");t.attr("aria-expanded",true);n.show()}};n.noSelect=function(){var e="none";return this.bind("selectstart dragstart mousedown",function(){return false}).css({MozUserSelect:e,msUserSelect:e,webkitUserSelect:e,userSelect:e})};if(o){r=n.details=function(){return this.each(function(){var e=t(this),n=t("summary",e).first();if(!e.attr("id")){e.attr("id","details-id-"+i)}e.attr("role","group");n.attr({role:"button","aria-expanded":e.prop("open"),"aria-controls":e.attr("id")}).on("click",function(){var t=e.prop("open");n.attr("aria-expanded",!t);e.triggerHandler((t?"close":"open")+".details")})})};r.support=o}else{r=n.details=function(){return this.each(function(){var e=t(this),n=t("summary",e).first(),r=e.children(":not(summary)"),o=e.contents(":not(summary)");if(!e.attr("id")){e.attr("id","details-id-"+i)}e.attr("role","group");if(!n.length){n=t("<summary>").text("Details").prependTo(e)}if(r.length!=o.length){o.filter(function(){return this.nodeType==3&&/[^ \t\n\f\r]/.test(this.data)}).wrap("<span>");r=e.children(":not(summary)")}e.prop("open",typeof e.attr("open")=="string");u(e,n,r);n.attr({role:"button","aria-controls":e.attr("id")}).noSelect().prop("tabIndex",0).on("click",function(){n.focus();u(e,n,r,true)}).keyup(function(e){if(32==e.keyCode||13==e.keyCode&&!s){e.preventDefault();n.click()}})})};r.support=o}})(document,jQuery)